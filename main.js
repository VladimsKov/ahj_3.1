(()=>{"use strict";class e{static changePlace(e){const i=e,t=Math.floor(15*Math.random()),s=i.activeId;if(t!==s)return i.field.children[s].classList.toggle("field-item_active"),i.field.children[t].classList.toggle("field-item_active"),void(i.activeId=t);i.field.children[s].classList.toggle("field-item_active"),i.field.children[t+1].classList.toggle("field-item_active"),i.activeId=t+1}}class i{constructor(){this.loss=0,this.win=0}clickHandler(i,t){const s=t;i.classList.contains("field-item_active")?(this.win+=1,clearInterval(s.timerId),e.changePlace(s),s.timerId=setInterval((()=>{e.changePlace(s)}),1e3)):(this.loss+=1,5===this.loss&&clearInterval(s.timerId))}}class t{constructor(){const e=document.createElement("div");this.field=e,this.renderField(),this.renderActiveItem(),this.timerId="",this.clicker=new i,this.renderInfoFields(),this.field.addEventListener("click",(e=>{this.clicker.clickHandler(e.target,this),this.infoCounts()}))}renderField(){document.body.prepend(this.field),this.field.classList.add("field");for(let e=1;e<=16;e+=1){const e=document.createElement("div");e.classList.add("field-item"),this.field.append(e)}}renderActiveItem(){this.activeId=Math.floor(16*Math.random()),this.field.children[this.activeId].classList.add("field-item_active")}renderInfoFields(){this.infoFields=document.createElement("div"),this.infoFields.classList.add("info-block"),this.infoFields.insertAdjacentHTML("afterbegin","<p>Кол-во баллов: <span>0</span></p>\n    <p>Кол-во неудачных попыток: <span>0</span></p>"),this.field.after(this.infoFields)}infoCounts(){this.infoFields.children[0].lastElementChild.innerText=this.clicker.win,this.infoFields.children[1].lastElementChild.innerText=this.clicker.loss,5===this.clicker.loss&&this.infoFields.insertAdjacentHTML("beforeend","Игра проиграна")}}document.addEventListener("DOMContentLoaded",(()=>{const i=new t(8);i.timerId=setInterval((()=>{e.changePlace(i)}),1e3),setTimeout((()=>clearInterval(i.timerId)),15e3)}))})();